pipeline {
    agent any
    stages { 
        stage('build docker images') {
            agent {label 'ubuntu'}
            steps {
              sh 'docker build -t peter:001 .'
            }
        }

        stage('push to nexus') {
            agent {label 'ubuntu'}
            steps {
                echo 'Hello World'
            }
        }


        stage('push to dockerhub') {
            agent {label 'ubuntu'}
            steps {
                echo 'Hello World'
            }
        }

        stage('push to ansible') {
            agent {label 'ubuntu'}
            steps {
                echo 'Hello World'
            }
        }

        stage('ansible deploy to k8s') {
            agent {label 'ubuntu'}
            steps {
                echo 'Hello World'
            }
        }

        stage('verify') {
            agent {label 'ubuntu'}
            steps {
                echo 'Hello World'
            }
        }


        stage('clean') {
            agent {label 'ubuntu'}
            steps {
                echo 'Hello World'
            }
        }

    }







}
